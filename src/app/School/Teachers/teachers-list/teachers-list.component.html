<app-loading-html *ngIf="isProgress"></app-loading-html>
<!--<mat-card appearance="outlined" *ngIf="!isProgress" class="overflow-hidden m-2">-->
<!--    <ng-container *ngIf="teachers && teachers.length > 0; else noTeachers">-->
<!--        <table class="table-auto w-full text-sm border-collapse">-->
<!--            <tr class="bg-gray-100 text-left">-->
<!--              <th class="px-4 py-2 border-b text-center">Nauczyciel</th>-->
<!--              <th class="px-4 py-2 border-b text-center w-[5%]">Aktywny</th>-->
<!--              <th class="px-4 py-2 border-b text-center">Uprawnienia</th>-->
<!--            </tr>-->
<!--            <ng-container *ngFor="let teacher of teachers;">-->
<!--                <tr class="hover:bg-slate-75">-->
<!--                  <td class="px-4 py-2 border-b">-->
<!--                      {{ teacher.full_user_name }}-->
<!--                  </td>-->
<!--                  <td class="px-4 py-2 border-b">-->
<!--                    <span class="px-2 py-1 rounded-full text-white text-sm"-->
<!--                          [ngClass]="teacher.is_active ? 'bg-green-800' : 'bg-red-800'">-->
<!--                      {{ teacher.is_active ? 'Tak' : 'Nie' }}-->
<!--                    </span>-->
<!--                  </td>-->
<!--                  <td class="px-4 py-2 border-b">-->
<!--                      {{ teacher.permissions || '-' }}-->
<!--                  </td>-->
<!--                </tr>-->
<!--            </ng-container>-->
<!--        </table>-->
<!--    </ng-container>-->

<!--    <ng-template #noTeachers>-->
<!--        <div class="text-center p-4 text-gray-500">-->
<!--            Brak pracowników w systemie.-->
<!--        </div>-->
<!--    </ng-template>-->
<!--</mat-card>-->


<ng-container *ngIf="!isProgress">
  <mat-card  class="m-2 p-0 h-[600px] flex flex-col">
    <div class="flex-1 overflow-y-auto" style="border-bottom: 1px solid #ccc; padding-bottom: 8px;">
      <table mat-table matSort (matSortChange)="sortData($event)" [dataSource]="dataSource"
             class="w-full text-sm border-collapse">

        <ng-container matColumnDef="select">
          <th mat-header-cell class="w-[2%] text-center" *matHeaderCellDef>
            <mat-checkbox
              (change)="masterToggle()"
              [checked]="isAllSelected()"
              [indeterminate]="selection.hasValue() && !isAllSelected()"
              [matTooltip]="checkboxLabel()">
            </mat-checkbox>
          </th>

          <td mat-cell *matCellDef="let element">
            <mat-checkbox
              (click)="$event.stopPropagation()"
              (change)="$event ? selection.toggle(element.id) : null"
              [checked]="selection.isSelected(element.id)"
              [matTooltip]="checkboxLabel(element.id)">
            </mat-checkbox>
          </td>
        </ng-container>

        <ng-container matColumnDef="full_user_name">
          <th mat-header-cell class="px-4 py-2 border-b text-center" *matHeaderCellDef mat-sort-header> Uczeń</th>
          <td mat-cell *matCellDef="let element"> {{ element.full_user_name || '-' }}</td>
        </ng-container>

        <ng-container matColumnDef="email">
          <th mat-header-cell class="px-4 py-2 border-b text-center" *matHeaderCellDef mat-sort-header> E-mail</th>
          <td mat-cell class="px-4 py-2 border-b text-center" *matCellDef="let element"> {{ element.email || '-' }}</td>
        </ng-container>

        <ng-container matColumnDef="login">
          <th mat-header-cell class="px-4 py-2 border-b text-center" *matHeaderCellDef mat-sort-header>Login</th>
          <td mat-cell class="px-4 py-2 border-b text-center" *matCellDef="let element"> {{ element.login || '-' }}</td>
        </ng-container>

        <ng-container matColumnDef="pesel">
          <th mat-header-cell class="px-4 py-2 border-b text-center" *matHeaderCellDef mat-sort-header> Pesel</th>
          <td mat-cell class="px-4 py-2 border-b text-center" *matCellDef="let element"> {{ element.pesel || '-' }}
          </td>
        </ng-container>

        <ng-container matColumnDef="data_urodzenia">
          <th mat-header-cell class="px-4 py-2 border-b text-center" *matHeaderCellDef mat-sort-header> Data urodzenia
          </th>
          <td mat-cell class="px-4 py-2 border-b text-center"
              *matCellDef="let element"> {{ element.data_urodzenia || '-' }}
          </td>
        </ng-container>

        <ng-container matColumnDef="data_rejestracji">
          <th mat-header-cell class="px-4 py-2 border-b text-center" *matHeaderCellDef mat-sort-header> Data rejestracji
          </th>
          <td mat-cell class="px-4 py-2 border-b text-center"
              *matCellDef="let element"> {{ element.data_rejestracji || '-' }}
          </td>
        </ng-container>

        <ng-container matColumnDef="permissions">
          <th mat-header-cell class="px-4 py-2 border-b text-center" *matHeaderCellDef mat-sort-header> Uprawnienia
          </th>
          <td mat-cell class="px-4 py-2 border-b text-center"
              *matCellDef="let element"> {{ element.permissions || '-' }}
          </td>
        </ng-container>

        <ng-container matColumnDef="is_active">
          <th mat-header-cell class="border-b text-center" *matHeaderCellDef mat-sort-header>
            Zablokowany dostęp
          </th>
          <td mat-cell class="px-4 py-2 border-b text-center" *matCellDef="let element">
            <span class="px-2 py-1 rounded-full text-white text-sm"
                  [ngClass]="element.is_active ? 'bg-green-800' : 'bg-red-800'">
                        {{ !element.is_active ? 'Tak' : 'Nie' }}
                      </span>
          </td>
        </ng-container>

        <ng-container matColumnDef="actions">
          <th mat-header-cell class="border-b text-center" *matHeaderCellDef>Akcja</th>
          <td mat-cell class="w-[1%]" *matCellDef="let element">
            <button matTooltip="Edytuj" disabled mat-icon-button (click)="goToStudent(element.id)">
              <mat-icon>edit</mat-icon>
            </button>
          </td>
        </ng-container>

        <tr mat-header-row class="bg-gray-100 text-center sticky-header" *matHeaderRowDef="displayedColumns"></tr>
        <tr mat-row class="hover:bg-slate-75" *matRowDef="let row; columns: displayedColumns;"></tr>
      </table>

      <ng-container *ngIf="teachers.length == 0">
        <div class="text-center p-4 text-gray-500">
          Brak dodanych pracowników w systemie. <br> Skorzystaj z przycisku dodaj.
        </div>
      </ng-container>

    </div>
    <mat-paginator
      [length]="totalItems"
      [pageSize]="pageSize"
      [pageIndex]="currentPage - 1"
      [pageSizeOptions]="[5, 10, 15, 20, 25, 30, 35, 50, 100]"
      (page)="onPageChange($event)">
    </mat-paginator>
  </mat-card>
</ng-container>
